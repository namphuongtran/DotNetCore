function City(){City.prototype.init.apply(this,arguments)}StringUtil={_unicodeChars:"àáảãạâầấẩẫậăằắẳẵặèéẻẽẹêềếểễệđìíỉĩịòóỏõọôồốổỗộơờớởỡợùúủũụưừứửữựỳýỷỹỵÀÁẢÃẠÂẦẤẨẪẬĂẰẮẲẴẶÈÉẺẼẸÊỀẾỂỄỆĐÌÍỈĨỊÒÓỎÕỌÔỒỐỔỖỘƠỜỚỞỠỢÙÚỦŨỤƯỪỨỬỮỰỲÝỶỸỴÂĂĐÔƠƯ",_nonUnicodeChars:"aaaaaaaaaaaaaaaaaeeeeeeeeeeediiiiiooooooooooooooooouuuuuuuuuuuyyyyyAAAAAAAAAAAAAAAAAEEEEEEEEEEEDIIIOOOOOOOOOOOOOOOOOOOUUUUUUUUUUUYYYYYAADOOU",unicodeToNoneUnicode:function(n){var i="",r,t;if(!n||n==="")return i;for(t=0;t<n.length;t++)r=this._unicodeChars.indexOf(n[t].toString()),i+=r>=0?this._nonUnicodeChars[r]:n[t];return i},removeSpecialCharacter:function(n){return n.replace(/[^\w\s]/gi,"")},processString:function(n){return n=this.removeSpecialCharacter(n),n=n.replace(" ","-"),n=n.replace("--","-"),n.toLowerCase()},buildUrl:function(n,t,i){return baseUri+n+"/"+this.processString(this.unicodeToNoneUnicode(t))+"."+i}};City.prototype={init:function(n){if(n==null||n.length<=0){typeof console!="undefined"&&console.log&&cons.log("Not found `@containerId`");return}this.$container=$(n);this.edit();this.onBlurValidate()},edit:function(){var n=this;$(".btn-save",this.$container).off("click").on("click",function(){var i=$(".lat-val",n.$container).val(),r=$(".lon-val",n.$container).val(),u=parseInt($(".city-id",n.$container).val()),f=$(".city-name",n.$container).val(),s=baseUri+"City/EditCity",h=$(".validation-city",n.$container),c=$(".validation-lat",n.$container),l=$(".validation-lon",n.$container),t=$(".message",n.$container),e,o;t.empty();e=n.validate(u,f,i,r);e?(h.text(""),c.text(""),l.text(""),o={ID:u,City:f,Lat:parseFloat(i),Lon:parseFloat(r)},$.ajax({type:"POST",url:s,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(o),success:function(n){n.isSuccess?(t.removeClass("text-danger").addClass("text-success"),t.html(n.message)):t.html(n.message)},failure:function(n){alert(n)}})):t.html("An Error Has Occured")})},validate:function(n,t,i,r){var f=this,s=$(".message",f.$container),h=$(".validation-city",f.$container),e=$(".validation-lat",f.$container),o=$(".validation-lon",f.$container),u=!0;return(isNaN(n)||n<=0)&&(s.html("This city does not existed."),u=!1),t==""&&(h.text("City name is not empty"),u=!1),i==""?(e.text("Lat is incorrect"),u=!1):i.match(/^[1-9]\d*(\.\d+)?$/)||(e.text("Lat is a number and only allow one dot"),u=!1),r==""?(o.text("Lon is incorrect"),u=!1):r.match(/^[1-9]\d*(\.\d+)?$/)||(o.text("Lat is a number and only allow one dot"),u=!1),u},onBlurValidate:function(){var n=this,r=$(".lat-val",n.$container),u=$(".lon-val",n.$container),t=$(".validation-lat",n.$container),i=$(".validation-lon",n.$container);r.off("blur").on("blur",function(){var n=$(this).val();n==""?t.text("Lat is incorrect"):n.match(/^[1-9]\d*(\.\d+)?$/)?t.text(""):t.text("Lat is a number and only allow one dot")});u.off("blur").on("blur",function(){var n=$(this).val();n==""?i.text("Lon is incorrect"):n.match(/^[1-9]\d*(\.\d+)?$/)?i.text(""):i.text("Lat is a number and only allow one dot")})}};$(document).ready(function(){var t=new City(".city-form"),n=$(".city-table");if(n.length>0)n.find("a.btn-cityname").off("click").on("click",function(){var n=$(this).html(),t=parseInt($(this).attr("city-id"));window.location.href=StringUtil.buildUrl("details",n,t)})});